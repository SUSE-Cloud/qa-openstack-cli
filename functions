#!/bin/bash

source ~/.openrc
unset SERVICE_ENDPOINT
# we will use the tenant name
unset OS_TENANT_ID

source config

function glance_flags() {
	case $1 in
		"image-create")
			if [ "$VIRT" == "kvm" ] ; then
				echo ""
			elif [ "$VIRT" == "xen-hvm" ] ; then
				echo "--property vm_mode=hvm"
			elif [ "$VIRT" == "xen-pv" ] ; then
				echo "-property vm_mode=xen"
			elif [ "$VIRT" == "lxc" ] ; then
				echo ""
			fi
		;;
		"image-url")
			if [ "$VIRT" == "kvm" ] ; then
				echo "$IMG_KVM"
			elif [ "$VIRT" == "xen-hvm" ] ; then
				echo "$IMG_KVM"
			elif [ "$VIRT" == "xen-pv" ] ; then
				echo "$IMG_PV"
			elif [ "$VIRT" == "lxc" ] ; then
				echo "$IMG_LXC"
			fi
		;;
		"")
			if [ "$INSECURE" == "1" ] ; then
				echo "--insecure"
			fi
		;;
	esac
}

function nova_flags() {
	case $1 in
		"")
			if [ "$INSECURE" == "1" ] ; then
				echo "--insecure"
			fi
		;;
	esac
}

function keystone_flags() {
	case $1 in
		"")
			if [ "$INSECURE" == "1" ] ; then
				echo "--insecure"
			fi
		;;
	esac
}

function exit_ok() {
	exit 0
}

function exit_fail() {
	exit 1
}

function exit_error() {
	exit 2
}

function exit_skipped() {
	exit 3
}


if [ "$DEBUG" == "1" ] ; then
	set -x
fi
